<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sebuah Kejutan Untukmu!</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Font Kustom dari Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* CSS Kustom */
        body {
            /* Latar belakang utama */
            background-image: url('https://feeldreams.github.io/wp11.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Mencegah scroll saat modal aktif */
        }

        /* Menggunakan font kustom untuk judul */
        .font-display {
            font-family: 'Fredoka One', cursive;
        }

        /* Efek bayangan teks agar mudah dibaca di atas background */
        .shadow-text {
            text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Animasi sederhana */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Style untuk sel minigame */
        .game-cell {
            transition: all 0.2s ease;
        }
        .game-cell:hover {
            transform: scale(1.05);
        }

        /* Style untuk "mole" (gambar cilukba) */
        .mole {
            animation: popUp 0.3s ease;
        }

        @keyframes popUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Musik Latar (Autoplay) -->
    <audio id="bgMusic" src="https://files.catbox.moe/7czehh.mp3" loop></audio>

    <!-- 
      LAYAR 1: MODAL NAMA PENGGUNA
      Modal ini akan muncul pertama kali, meminta nama pengguna.
    -->
    <div id="nameModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-white bg-opacity-90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl text-center w-full max-w-md animate-fade-in">
            <!-- Stiker Panda Panah -->
            <img src="https://feeldreams.github.io/pandapanah.gif" alt="Panda lucu" class="w-32 h-32 mx-auto mb-4 rounded-full shadow-lg">
            
            <h2 class="text-3xl font-display text-pink-600 mb-2">Halo, Kamu!</h2>
            <p class="text-lg mb-4">Sebelum kita mulai seru-seruan, boleh tulis nama panggilanmu dulu?</p>
            
            <input type="text" id="nameInput" class="w-full px-4 py-3 border-2 border-pink-300 rounded-xl text-lg text-center focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="Tulis namamu di sini...">
            
            <!-- Pesan Error (jika nama kosong) -->
            <p id="nameError" class="text-red-500 text-sm mt-2 hidden">Nama nggak boleh kosong ya!</p>
            
            <button id="startButton" class="w-full mt-4 bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-xl text-lg transition-all transform hover:scale-105 shadow-lg">
                Lanjut!
            </button>
        </div>
    </div>

    <!-- 
      LAYAR 2: KONTEN UTAMA
      Akan muncul setelah pengguna memasukkan nama.
    -->
    <div id="mainContent" class="hidden min-h-screen w-full p-4 md:p-8 flex flex-col items-center justify-center space-y-6 overflow-y-auto">
        
        <!-- Pesan Selamat Datang -->
        <div class="text-center animate-fade-in" style="animation-delay: 0.2s;">
            <h1 class="text-4xl md:text-6xl font-display text-white shadow-text">
                Hai, <span class="userNameDisplay text-yellow-300">Kamu</span>!
            </h1>
            <p class="text-xl md:text-2xl text-white shadow-text mt-2">Aku ada sesuatu buat nemenin harimu!</p>
            <img src="https://feeldreams.github.io/weee.gif" alt="Stiker weee" class="w-40 h-40 mx-auto mt-4">
        </div>

        <!-- Kartu "Reward" -->
        <div class="bg-white bg-opacity-90 backdrop-blur-sm p-6 rounded-2xl shadow-xl w-full max-w-lg text-center animate-fade-in" style="animation-delay: 0.4s;">
            <h3 class="text-2xl font-display text-teal-600 mb-3">Lagi Butuh Sesuatu?</h3>
            <p class="mb-4">Lagi bosen? Lagi galau? Atau malah lagi super semangat? Apapun itu, klik tombol di bawah ini buat dapetin... sebuah kejutan!</p>
            <button id="rewardButton" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-5 rounded-full text-lg transition-all transform hover:scale-105 shadow-md">
                Klik Buat Kejutan!
            </button>
        </div>

        <!-- Kartu "Minigame" -->
        <div class="bg-white bg-opacity-90 backdrop-blur-sm p-6 rounded-2xl shadow-xl w-full max-w-lg text-center animate-fade-in" style="animation-delay: 0.6s;">
            <h3 class="text-2xl font-display text-purple-600 mb-3">Minigame: Cilukba Cepat!</h3>
            <p class="mb-4">Ayo tes seberapa cepat reaksimu! Klik gambar yang muncul secepat mungkin sebelum dia hilang. Siap?</p>
            <div class="flex justify-between items-center mb-4 px-4">
                <span class="text-xl font-bold">Skor: <span id="gameScore" class="text-purple-700">0</span></span>
                <button id="startGameButton" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-5 rounded-full text-lg transition-all transform hover:scale-105 shadow-md">
                    Mulai Main!
                </button>
            </div>
            
            <!-- Area Grid Game -->
            <div id="gameGrid" class="grid grid-cols-3 gap-3 p-2 bg-purple-100 rounded-lg">
                <!-- Sel game akan dibuat oleh JavaScript -->
            </div>
        </div>
        
    </div>

    <!-- 
      LAYAR 3: MODAL REWARD
      Akan muncul saat tombol "Reward" diklik.
    -->
    <div id="rewardModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40 p-4">
        <div class="bg-white bg-opacity-90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl text-center w-full max-w-md animate-fade-in relative">
            
            <!-- Tombol Close -->
            <button id="closeRewardButton" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            
            <!-- Stiker Emawh -->
            <img src="https://feeldreams.github.io/emawh.gif" alt="Stiker peluk" class="w-40 h-40 mx-auto mb-4 rounded-lg">
            
            <h2 class="text-3xl font-display text-teal-600 mb-2">TADAAAAA!</h2>
            <p class="text-lg mb-4">
                Ini dia <i>virtual hug</i> dan suntikan semangat spesial buat 
                <span class="userNameDisplay font-bold">kamu</span>! 
                Semoga harimu makin seru dan menyenangkan ya! ðŸ˜‰
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Variabel Global ---
            const nameModal = document.getElementById('nameModal');
            const mainContent = document.getElementById('mainContent');
            const rewardModal = document.getElementById('rewardModal');
            
            const startButton = document.getElementById('startButton');
            const nameInput = document.getElementById('nameInput');
            const nameError = document.getElementById('nameError');
            const userNameDisplays = document.querySelectorAll('.userNameDisplay');
            
            const rewardButton = document.getElementById('rewardButton');
            const closeRewardButton = document.getElementById('closeRewardButton');
            
            const bgMusic = document.getElementById('bgMusic');
            
            // Variabel Game
            const startGameButton = document.getElementById('startGameButton');
            const gameGrid = document.getElementById('gameGrid');
            const gameScore = document.getElementById('gameScore');
            let score = 0;
            let gameActive = false;
            let gameTimer;
            let gameCells = []; // Akan diisi saat game dimulai

            // --- Logika Halaman Utama ---

            // 1. Logika Tombol Mulai (Modal Nama)
            startButton.addEventListener('click', () => {
                const userName = nameInput.value.trim();
                
                if (userName === "") {
                    // Tampilkan error jika nama kosong
                    nameError.classList.remove('hidden');
                } else {
                    // Nama valid, lanjutkan
                    nameError.classList.add('hidden');
                    
                    // Set nama pengguna di semua tempat
                    userNameDisplays.forEach(span => {
                        span.textContent = userName;
                    });
                    
                    // Sembunyikan modal nama, tampilkan konten utama
                    nameModal.classList.add('hidden');
                    mainContent.classList.remove('hidden');
                    document.body.style.overflow = 'auto'; // Izinkan scroll lagi
                    
                    // Putar musik (setelah interaksi pengguna)
                    bgMusic.play().catch(e => console.warn("Pemutaran musik otomatis mungkin diblokir oleh browser."));
                }
            });

            // 2. Logika Tombol Reward
            rewardButton.addEventListener('click', () => {
                rewardModal.classList.remove('hidden');
            });
            
            closeRewardButton.addEventListener('click', () => {
                rewardModal.classList.add('hidden');
            });

            // --- Logika Minigame "Cilukba" ---

            // 3. Tombol Mulai Game
            startGameButton.addEventListener('click', startGame);

            function startGame() {
                if (gameActive) return; // Mencegah game dimulai berkali-kali

                gameActive = true;
                score = 0;
                gameScore.textContent = score;
                startGameButton.disabled = true;
                startGameButton.textContent = "Tunggu...";

                // Buat ulang grid
                resetGrid();

                // Mulai timer untuk memunculkan "mole"
                gameTimer = setInterval(popMole, 900); // Muncul setiap 0.9 detik

                // Atur timer untuk mengakhiri game (misal: 15 detik)
                setTimeout(endGame, 15000);
            }
            
            // 4. Buat/Reset Grid Game
            function resetGrid() {
                gameGrid.innerHTML = ''; // Kosongkan grid
                gameCells = []; // Kosongkan array sel
                
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('div');
                    cell.className = "game-cell h-24 w-full bg-purple-200 rounded-lg cursor-pointer hover:bg-purple-300";
                    cell.addEventListener('click', whack); // Tambahkan listener klik
                    gameGrid.appendChild(cell);
                    gameCells.push(cell);
                }
            }

            // 5. Logika Memukul "Mole" (Klik Sel)
            function whack(e) {
                // Cek apakah yang diklik adalah sel yang benar (punya class 'mole')
                if (!gameActive || !e.target.classList.contains('mole')) {
                    return; // Abaikan jika game tidak aktif atau klik meleset
                }
                
                score++;
                gameScore.textContent = score;
                
                // Hapus "mole" segera setelah diklik
                e.target.classList.remove('mole');
                e.target.innerHTML = '';
            }

            // 6. Logika Memunculkan "Mole"
            function popMole() {
                // Hapus mole yang lama (jika ada)
                const currentMole = document.querySelector('.mole');
                if (currentMole) {
                    currentMole.classList.remove('mole');
                    currentMole.innerHTML = '';
                }

                // Pilih sel acak untuk mole baru
                const randomCell = gameCells[Math.floor(Math.random() * gameCells.length)];
                randomCell.classList.add('mole');
                
                // Tampilkan stiker cilukba
                // pointer-events-none agar klik tetap terdeteksi di div, bukan di gambar
                randomCell.innerHTML = `<img src="https://feeldreams.github.io/cilukba.gif" class="w-full h-full object-cover rounded-lg pointer-events-none" alt="Cilukba">`;
            }

            // 7. Logika Mengakhiri Game
            function endGame() {
                gameActive = false;
                clearInterval(gameTimer); // Hentikan timer pemuncul mole
                
                startGameButton.disabled = false;
                startGameButton.textContent = "Mulai Main Lagi!";
                
                // Tampilkan skor akhir di area grid
                gameGrid.innerHTML = `
                    <div class="col-span-3 text-center p-10 text-2xl font-display text-purple-800">
                        Game Selesai!
                        <br>
                        Skor Akhirmu: ${score}
                    </div>
                `;
            }
        });
    </script>

</body>
</html>
